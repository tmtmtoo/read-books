# Unit Testing Principles, Practices, and Patterns

## Chapter 1. The goal of unit testing

ユニットテストに費やす労力を最小限に抑え、かつ、ユニットテストの効果を最大限に発揮することは簡単ではなく、それらを両立できるようにすることを、この本では学べるとの記述があった。
日頃から、テストの有無は論外としても、良いテスト・悪いテストについては知っておきたいと考えていたので、この本でもって良いテストスイートを構築する方法を学んでいきたい。

### 1.1. The current state of unit testing

テストコードがプロダクションコードの数倍もの記述があるのはそうとして、プロダクションコードのメンテナビリティに悪い影響を及ぼしているケースも多い。あるエンジニアからは、仕様変更に伴ってテストコードの変更量が多いからDDDなどの設計手法にも懐疑的と話を聞いたことがあるが、具体的な状況が分からないとしても、非常に残念なケースだと思ったことがある。そのようなネガティブな感情を脱するようなユニットテストの在り方とはどのようなものがあるだろうか。

### 1.2. The goal of unit testing

ユニットテストを作成することが良い設計につながることはあるが、それはユニットテストの本来の目的でなく、ユニットテストはそのソフトウェアプロジェクトが持続的に成長可能にするためにあるという。なるほどね。
テスト容易性ばかり考えていたが、そのソフトウェア自体がこのまま成長を続けていけるかという観点では Googleが提唱していた「ソフトウェアエンジニアリングは時間で積分したプログラミング」を思い出した。

ただ、良いテスト・悪いテストとあるように、悪いテストが多いとテストが無いケースのようにプロダクトコードのメンテナビリティに悪影響を及ぼし始めるため注意が必要だ。

### 1.3. Using coverage metrics to measure test suite quality

カバレッジにコードカバレッジとブランチカバレッジの二種類があることは初めて知った。ネガティブメトリックとしてしか利用できないことや目標として利用できないことはそうなので、メトリクスを取るときはそれを前提にする必要があるし、それが前提であることを明確に周知しないといけない。
と、改めて考えてみるとメトリクスもちゃんとネガティブかポジティブか、目標としてみているか単なる指標か分類しないといけないな。これに限らず。

### 1.4. What makes a successful test suite?

良いテスト・悪いテストの区別の仕方は第４章で学べるらしい。それは置いておいても、良いテストスイートの特性がいくつかある。開発サイクルに組み込まれていること、コードベースの最も大事な箇所をテストしていること、最小限のメンテナンスで最大限の価値を発揮できること、この3つのようだ。

大事な箇所を、のくだりでは、それはビジネスロジック、つまりドメインモデルであることが書かれていたが、他のレイヤーはどうなんだろう。アダプターなレイヤーもテストすることが一般的なように思えるが。具体的な説明は無かったので後の文章で確認できるかな。

### 1.5. What you will learn in this book

テストスイートとプロダクションコードのリファクタ方法、様々なスタイルの単体テスト、結合テストでのシステム全体の動作の検証方法、単体テストのアンチパターンと特定方法や回避方法を学べると豪語しているので楽しみだ。
